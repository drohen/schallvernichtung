function ne(t){for(var e=t.split(/([#.])/),s="",i="",o=[],r=0;r<e.length;r++){var n=e[r];n==="#"?i=e[++r]:n==="."?o.push(e[++r]):n.length&&(s=n)}return{tag:s||"div",id:i,className:o.join(" ")}}function ae(t,e){var s=ne(t),i=s.tag,o=s.id,r=s.className,n=e?document.createElementNS(e,i):document.createElement(i);return o&&(n.id=o),r&&(e?n.setAttribute("class",r):n.className=r),n}function W(t,e){var s=v(t),i=v(e);return e===i&&i.__redom_view&&(e=i.__redom_view),i.parentNode&&(q(e,i,s),s.removeChild(i)),e}function q(t,e,s){var i=e.__redom_lifecycle;if(H(i)){e.__redom_lifecycle={};return}var o=s;for(e.__redom_mounted&&C(e,"onunmount");o;){var r=o.__redom_lifecycle||{};for(var n in i)r[n]&&(r[n]-=i[n]);H(r)&&(o.__redom_lifecycle=null),o=o.parentNode}}function H(t){if(t==null)return!0;for(var e in t)if(t[e])return!1;return!0}var he=["onmount","onremount","onunmount"],ce=typeof window!="undefined"&&"ShadowRoot"in window;function u(t,e,s,i){var o=v(t),r=v(e);e===r&&r.__redom_view&&(e=r.__redom_view),e!==r&&(r.__redom_view=e);var n=r.__redom_mounted,h=r.parentNode;return n&&h!==o&&q(e,r,h),s!=null?i?o.replaceChild(r,v(s)):o.insertBefore(r,v(s)):o.appendChild(r),le(e,r,o,h),e}function C(t,e){e==="onmount"||e==="onremount"?t.__redom_mounted=!0:e==="onunmount"&&(t.__redom_mounted=!1);var s=t.__redom_lifecycle;if(!!s){var i=t.__redom_view,o=0;i&&i[e]&&i[e]();for(var r in s)r&&o++;if(o)for(var n=t.firstChild;n;){var h=n.nextSibling;C(n,e),n=h}}}function le(t,e,s,i){for(var o=e.__redom_lifecycle||(e.__redom_lifecycle={}),r=s===i,n=!1,h=0,d=he;h<d.length;h+=1){var f=d[h];r||t!==e&&f in t&&(o[f]=(o[f]||0)+1),o[f]&&(n=!0)}if(!n){e.__redom_lifecycle={};return}var c=s,w=!1;for((r||c&&c.__redom_mounted)&&(C(e,r?"onremount":"onmount"),w=!0);c;){var l=c.parentNode,_=c.__redom_lifecycle||(c.__redom_lifecycle={});for(var g in o)_[g]=(_[g]||0)+o[g];if(w)break;(c.nodeType===Node.DOCUMENT_NODE||ce&&c instanceof ShadowRoot||l&&l.__redom_mounted)&&(C(c,r?"onremount":"onmount"),w=!0),c=l}}function de(t,e,s){var i=v(t);if(typeof e=="object")for(var o in e)z(i,o,e[o]);else z(i,e,s)}function z(t,e,s){s==null?t.style[e]="":t.style[e]=s}var F="http://www.w3.org/1999/xlink";function $(t,e,s,i){var o=v(t),r=typeof e=="object";if(r)for(var n in e)$(o,n,e[n],i);else{var h=o instanceof SVGElement,d=typeof s=="function";if(e==="style"&&typeof s=="object")de(o,s);else if(h&&d)o[e]=s;else if(e==="dataset")K(o,s);else if(!h&&(e in o||d)&&e!=="list")o[e]=s;else{if(h&&e==="xlink"){G(o,s);return}i&&e==="class"&&(s=o.className+" "+s),s==null?o.removeAttribute(e):o.setAttribute(e,s)}}}function G(t,e,s){if(typeof e=="object")for(var i in e)G(t,i,e[i]);else s!=null?t.setAttributeNS(F,e,s):t.removeAttributeNS(F,e,s)}function K(t,e,s){if(typeof e=="object")for(var i in e)K(t,i,e[i]);else s!=null?t.dataset[e]=s:delete t.dataset[e]}function ue(t){return document.createTextNode(t??"")}function Q(t,e,s){for(var i=0,o=e;i<o.length;i+=1){var r=o[i];if(!(r!==0&&!r)){var n=typeof r;n==="function"?r(t):n==="string"||n==="number"?t.appendChild(ue(r)):E(v(r))?u(t,r):r.length?Q(t,r,s):n==="object"&&$(t,r,null,s)}}}function pe(t){return typeof t=="string"?x(t):v(t)}function v(t){return t.nodeType&&t||!t.el&&t||v(t.el)}function E(t){return t&&t.nodeType}var X={};function x(t){for(var e=[],s=arguments.length-1;s-- >0;)e[s]=arguments[s+1];var i,o=typeof t;if(o==="string")i=J(t).cloneNode(!1);else if(E(t))i=t.cloneNode(!1);else if(o==="function"){var r=t;i=new(Function.prototype.bind.apply(r,[null].concat(e)))}else throw new Error("At least one argument required");return Q(v(i),e,!0),i}var p=x;x.extend=function(e){for(var s=[],i=arguments.length-1;i-- >0;)s[i]=arguments[i+1];var o=J(e);return x.bind.apply(x,[this,o].concat(s))};function J(t){return X[t]||(X[t]=ae(t))}function N(t){for(var e=[],s=arguments.length-1;s-- >0;)e[s]=arguments[s+1];for(var i=v(t),o=Y(t,e,i.firstChild);o;){var r=o.nextSibling;W(t,o),o=r}}function Y(t,e,s){for(var i=s,o=new Array(e.length),r=0;r<e.length;r++)o[r]=e[r]&&v(e[r]);for(var n=0;n<e.length;n++){var h=e[n];if(!!h){var d=o[n];if(d===i){i=i.nextSibling;continue}if(E(d)){var f=i&&i.nextSibling,c=h.__redom_index!=null,w=c&&f===o[n+1];u(t,h,i,w),w&&(i=f);continue}h.length!=null&&(i=Y(t,h,i))}}return i}var Z=function(e,s,i){this.View=e,this.initData=i,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],s!=null&&(this.key=typeof s=="function"?s:me(s))};Z.prototype.update=function(e,s){for(var i=this,o=i.View,r=i.key,n=i.initData,h=r!=null,d=this.lookup,f={},c=new Array(e.length),w=this.views,l=0;l<e.length;l++){var _=e[l],g=void 0;if(h){var R=r(_);g=d[R]||new o(n,_,l,e),f[R]=g,g.__redom_id=R}else g=w[l]||new o(n,_,l,e);g.update&&g.update(_,l,e,s);var re=v(g.el);re.__redom_view=g,c[l]=g}this.oldViews=w,this.views=c,this.oldLookup=d,this.lookup=f};function me(t){return function(e){return e[t]}}var k=function(e,s,i,o){this.View=s,this.initData=o,this.views=[],this.pool=new Z(s,i,o),this.el=pe(e),this.keySet=i!=null};k.prototype.update=function(e,s){e===void 0&&(e=[]);var i=this,o=i.keySet,r=this.views;this.pool.update(e,s);var n=this.pool,h=n.views,d=n.lookup;if(o)for(var f=0;f<r.length;f++){var c=r[f],w=c.__redom_id;d[w]==null&&(c.__redom_index=null,W(this,c))}for(var l=0;l<h.length;l++){var _=h[l];_.__redom_index=l}N(this,h),o&&(this.lookup=d),this.views=h};k.extend=function(e,s,i,o){return k.bind(k,e,s,i,o)};var a;(function(t){t[t.noDevice=0]="noDevice",t[t.requestingDevice=1]="requestingDevice",t[t.idle=2]="idle",t[t.starting=3]="starting",t[t.ready=4]="ready",t[t.recording=5]="recording",t[t.closing=6]="closing",t[t.error=7]="error"})(a||(a={}));var ee;(function(t){t[t.idle=0]="idle",t[t.start=1]="start",t[t.holding=2]="holding"})(ee||(ee={}));var S=class{constructor(e,s,i){if(this.handler=e,this.stateLabels=s,!(i in this.stateLabels))throw Error("Initial state not available state");this.state=i,this.touchTimeout=0,this.touchState=0,this.touchHold=this.touchHold.bind(this),this.el=p("button",this.stateLabels[i]),this.onDown=this.onDown.bind(this),this.el.addEventListener("mousedown",this.onDown),this.touchStart=this.touchStart.bind(this),this.el.addEventListener("touchstart",this.touchStart),this.touchEnd=this.touchEnd.bind(this),this.el.addEventListener("touchend",this.touchEnd),this.onUp=this.onUp.bind(this),this.el.addEventListener("mouseup",this.onUp),this.onClick=this.onClick.bind(this),this.el.addEventListener("click",this.onClick),this.onLeave=this.onLeave.bind(this),this.el.addEventListener("mouseleave",this.onLeave)}touchEnd(e){e.preventDefault(),e.stopPropagation(),clearTimeout(this.touchTimeout),this.touchState===2?(this.touchState=0,this.onUp()):(this.touchState=0,this.onClick())}touchHold(){this.touchState=2,this.onDown()}touchStart(e){e.preventDefault(),e.stopPropagation(),this.touchState===0&&(this.touchState=1,this.touchTimeout=window.setTimeout(this.touchHold,100))}onUp(e){e?.preventDefault(),this.handler.onUp?.(this.state)}onClick(e){e?.preventDefault(),this.handler.onClick?.(this.state)}onDown(e){e?.preventDefault(),this.handler.onDown?.(this.state)}onLeave(e){e?.preventDefault(),this.handler.onLeave?.(this.state)}setState(e){if(!(e in this.stateLabels))throw Error("Setting unavailable button state");this.state=e,this.el.textContent=this.stateLabels[this.state]}enable(){this.el.disabled=!1}disable(){this.el.disabled=!0}};var m;(function(t){t.error="Reload context",t.noDevice="Enable input device",t.requestingDevice="Loading...",t.idle="Hold down to record",t.stopRecording="Stopping...",t.recording="Release to stop recording",t.startRecording="Starting..."})(m||(m={}));var D=class{constructor(e,s,i){this.id=e,this.handler=s,this.recordLength=i,this.el=new S(this,Object.values(m).reduce((o,r)=>Object.assign(o,{[r]:r}),{}),m.noDevice),this.isRecordingEntity=!0,this.stopRecording=this.stopRecording.bind(this),this.onDown=this.onDown.bind(this),this.onUp=this.onUp.bind(this),this.onLeave=this.onLeave.bind(this),this.onClick=this.onClick.bind(this),this.recordingTimeout=0}stopRecording(){clearTimeout(this.recordingTimeout),this.handler.recordButtonOnStop()}onDown(e){e===m.idle&&this.handler.recordButtonOnStart()}onUp(e){e===m.recording&&this.stopRecording()}onLeave(e){e===m.recording&&this.stopRecording()}onClick(e){switch(e){case m.error:this.handler.recordButtonOnReload();break;case m.noDevice:this.handler.recordButtonOnRequest();break;default:break}}onRecordingStateChanged(e){switch(e){case a.starting:this.el.disable(),this.el.setState(m.startRecording);break;case a.recording:this.el.setState(m.recording),this.el.enable(),this.recordingTimeout=window.setTimeout(this.stopRecording,this.recordLength*1e3);break;case a.closing:this.el.disable(),this.el.setState(m.stopRecording);break;case a.idle:this.el.setState(m.idle),this.el.enable();break;case a.noDevice:this.el.setState(m.noDevice);break;case a.error:this.el.setState(m.error);break;case a.requestingDevice:this.el.disable(),this.el.setState(m.requestingDevice);break}}onRecordingError(){this.el.setState(m.error)}};var te={MODE:"production",NODE_ENV:"production",SSR:!1};import.meta.env=te;var L=class{constructor(e,s,i,o){this.core=e,this.workerPath=s,this.chunkSize=i,this.recordLength=o,this.mediaTracks=[],this.state=a.noDevice,this.handleRecorderMessage=this.handleRecorderMessage.bind(this),this.core.context.audioWorklet?this.core.context.audioWorklet.addModule(this.workerPath).catch(r=>this.emit("error",void 0,r)):(this.recorderNode=this.core.context.createScriptProcessor(this.chunkSize,1,1),this.processChunk=this.processChunk.bind(this),this.recorderNode.addEventListener("audioprocess",this.processChunk),this.recorderNode.connect(this.core.context.destination))}setRecorder(){if(this.core.context.audioWorklet){if(this.recorderNode=new AudioWorkletNode(this.core.context,"recording-worklet",{numberOfOutputs:0,numberOfInputs:1}),!this.recorderNode)throw Error("No recording node available to connect");this.core.getRecorderInputNode().connect(this.recorderNode),this.recorder=this.recorderNode.port}else this.recorder=new Worker(new URL(this.workerPath,import.meta.url),{name:"recording-worker",type:"module"});this.recorder.onmessage=this.handleRecorderMessage,this.postRecorder({command:"init",data:{chunkSize:this.chunkSize,maxLength:this.recordLength,sampleRate:this.core.context.sampleRate}})}unsetRecorder(){if(this.core.context.audioWorklet){if(!this.recorderNode)throw Error("No recording node available to disconnect");this.core.getRecorderInputNode().disconnect(this.recorderNode)}this.recorder=void 0}handleRecorderMessage(e){switch(e.data.message){case"ready":this.emit("state",a.ready);break;case"recording":this.emit("state",a.recording);break;case"done":this.unsetRecorder(),this.emit("state",a.idle),this.core.onRecorded(e.data.buffer);break}}processChunk(e){this.postRecorder({command:"chunk",buffer:e.inputBuffer.getChannelData(0)})}isRecordingEntity(e){return"isRecordingEntity"in e&&e.isRecordingEntity}postRecorder(e){this.recorder?.postMessage(e)}shiftState(e){if(e===this.state)return!1;switch(e){case a.closing:return this.state!==a.recording?!1:(this.state=a.closing,this.postRecorder({command:"stop"}),!0);case a.error:return this.state=a.error,!0;case a.idle:return this.state!==a.closing&&this.state!==a.requestingDevice?!1:(this.state=a.idle,!0);case a.noDevice:return this.state!==a.error?!1:(this.state=a.noDevice,!0);case a.recording:return this.state!==a.ready?!1:(this.state=a.recording,!0);case a.requestingDevice:return this.state!==a.noDevice?!1:(this.state=a.requestingDevice,this.getCapture(),!0);case a.ready:return this.state!==a.starting?!1:(this.state=a.ready,this.postRecorder({command:"start"}),!0);case a.starting:return this.state!==a.idle?!1:(this.state=a.starting,this.setRecorder(),!0)}}emit(e,s,i){if(!(e==="state"&&s&&!this.shiftState(s)))for(let o=0;o<this.core.entities.length;o++){let r=this.core.entities[o];this.isRecordingEntity(r)&&(e==="state"&&s?r.onRecordingStateChanged(s):e==="error"&&i&&r.onRecordingError(i))}}getCapture(){navigator.mediaDevices.getUserMedia({audio:{autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1},video:!1}).then(e=>(this.mediaTracks.push(...e.getAudioTracks()),this.core.handleStream(e))).then(()=>this.emit("state",a.idle)).catch(e=>this.emit("error",void 0,e))}recordButtonOnStart(){this.emit("state",a.starting)}recordButtonOnStop(){this.emit("state",a.closing)}recordButtonOnReload(){for(let e=0;e<this.mediaTracks.length;e++)this.mediaTracks[e].stop();this.mediaTracks.length=0,this.emit("state",a.noDevice)}recordButtonOnRequest(){this.emit("state",a.requestingDevice)}};var se;(function(t){t[t.notStarted=0]="notStarted",t[t.paused=1]="paused",t[t.playing=2]="playing"})(se||(se={}));var T=class{constructor(e,s){this.core=e,this.channels=s,this.samples=[]}joinEnds(e){let s=~~(this.core.context.sampleRate*.05);for(let i=0;i<s;i++)e[i]=e[i]*i/s,e[e.length-1-i]=e[e.length-1-i]*i/s}create(e){this.joinEnds(e);let s=this.core.context.createBuffer(this.channels,e.length,this.core.context.sampleRate),i=this.core.context.createBufferSource();s.copyToChannel(e,0),i.buffer=s,i.loop=!0;let o=this.samples.length;this.samples.push({label:`Sample ${new Date().toUTCString()}`,node:i,state:0}),this.core.onSampleAdd(o)}play(e){if(this.samples[e].state===2)return;let s=this.samples[e].state===0;this.samples[e].state=2,s&&this.samples[e].node.start()}pause(e){this.samples[e].state!==1&&(this.samples[e].state=1)}setLabel(e,s){this.samples[e].label=s,this.core.onLabelChange(e)}setPlaybackSpeed(e,s){this.samples[e].node.playbackRate.linearRampToValueAtTime(s,this.core.context.currentTime+10)}node(e){return this.samples[e].node}label(e){return this.samples[e].label}};var I=class{constructor(e){this.handler=e,this.el=p("div.sampleSelect"),this.handleClick=this.handleClick.bind(this),this.elements=[],this.selectedIndex=-1}handleClick(e){e!==this.selectedIndex&&(this.selectedIndex>-1&&this.elements[this.selectedIndex].classList.remove("selected"),this.elements[e].classList.add("selected"),this.handler.onSampleSelected(e,this.selectedIndex>-1?this.selectedIndex:void 0),this.selectedIndex=e)}add(e,s){let i=p("div.sampleItem",s);i.addEventListener("click",o=>{o.preventDefault(),this.handleClick(e)}),this.elements.push(i),u(this.el,i)}};var j=class{constructor(e,s,i){this.id=e,this.inputNode=s,this.outputNode=i,this.isExt=!0}isExtension(e){return"isExt"in e&&e.isExt}setInput(e){if(this.inputNode)throw Error(`Input node already set for ${this.id}`);this.inputNode=e}setOutput(e){if(this.outputNode)throw Error(`Output node already set for ${this.id}`);this.outputNode=e}input(){if(!this.inputNode)throw Error(`No input node set for ${this.id}`);return this.inputNode}output(){if(!this.outputNode)throw Error(`No output node set for ${this.id}`);return this.outputNode}connectInput(e){this.isExtension(e)?e.output().connect(this.input()):e.connect(this.input())}disconnectInput(e){this.isExtension(e)?e.output().disconnect(this.input()):e.disconnect(this.input())}connectOutput(e){this.isExtension(e)?this.output().connect(e.input()):this.output().connect(e)}disconnectOutput(e){this.isExtension(e)?this.output().disconnect(e.input()):this.output().disconnect(e)}};var b=class extends j{constructor(e,s,i="min"){super(e);this.core=s;let o=typeof i=="number"?i:i==="max"?101:i==="mid"?51:1;this.el=p("input",{type:"range",value:o,min:1,max:101,step:1e-4}),this.debounceOnChange=this.debounceOnChange.bind(this),this.el.addEventListener("input",this.debounceOnChange),this.debounce=0,this.debounceCount=0}logRange(e,s,i,o){if(i<=s)return s;let r=1,n=101,h=s<0&&i<0,d=h?s*-1+1:s<=0?-1*s+1:s+1,f=h?i*-1+1:s<=0?i+d:i+1,c=Math.log(d),l=(Math.log(f)-c)/(n-r);return o?(Math.log(e/(h?-1:1)+(h||s>0?1:d))-c)/l+r:(Math.exp(c+l*(e-r))-(h||s>0?1:d))*(h?-1:1)}debounceOnChange(){this.debounceCount+=1,clearTimeout(this.debounce),this.debounceCount>=50&&(this.debounceCount=0,this.onChange(parseFloat(this.el.value))),this.debounce=window.setTimeout(()=>this.onChange(parseFloat(this.el.value)),30)}onChange(e){throw Error(`Override on change, output value is ${e}`)}ramp(e,s){e.linearRampToValueAtTime(s,this.core.context.currentTime+.5)}};var O=class extends b{constructor(e){super("Compressor",e);this.gain=this.core.context.createGain(),this.node=this.core.context.createDynamicsCompressor(),this.gain.connect(this.node),this.setInput(this.gain),this.setOutput(this.node),this.gain.gain.setValueAtTime(-1,this.core.context.currentTime),this.node.threshold.setValueAtTime(-10,this.core.context.currentTime),this.node.knee.setValueAtTime(4,this.core.context.currentTime),this.node.ratio.setValueAtTime(2,this.core.context.currentTime),this.node.attack.setValueAtTime(0,this.core.context.currentTime),this.node.release.setValueAtTime(.1,this.core.context.currentTime)}onChange(e){this.ramp(this.gain.gain,this.logRange(e,-1,-1)),this.ramp(this.node.threshold,0-this.logRange(e,10,100)),this.ramp(this.node.knee,this.logRange(e,4,40)),this.ramp(this.node.ratio,this.logRange(e,2,20)),this.ramp(this.node.release,Math.pow(20,-1*this.logRange(e,1,1e3)))}};var A=class extends b{constructor(e){super("Distortion",e);this.node=this.core.context.createWaveShaper(),this.setInput(this.node),this.setOutput(this.node),this.node.oversample="4x",this.curveData=new Float32Array(this.core.context.sampleRate),this.curve(0),this.node.curve=this.curveData}curve(e){let s=typeof e=="number"?e:50,i=Math.PI/180,o=0;for(let r=0;r<this.core.context.sampleRate;++r)o=r*2/this.core.context.sampleRate-1,this.curveData[r]=(10+s)*o*50*i/(Math.PI+s*Math.abs(o))}onChange(e){this.curve(~~this.logRange(e,0,1e4)),this.node.curve=this.curveData}};var B=class extends b{constructor(e){super("Lowpass",e);this.node=this.core.context.createBiquadFilter(),this.setInput(this.node),this.setOutput(this.node),this.node.frequency.value=6e3,this.node.type="lowpass"}onChange(e){this.ramp(this.node.frequency,6e3-this.logRange(e,0,5950*.005)*200)}};var ie;(function(t){t[t.playing=0]="playing",t[t.paused=1]="paused"})(ie||(ie={}));var M=class{constructor(e){this.handler=e,this.el=p("button","Play audio"),this.state=1,this.playBtnEvent=this.playBtnEvent.bind(this),this.el.addEventListener("click",this.playBtnEvent)}playBtnEvent(){switch(this.state){case 1:this.state=0,this.el.textContent="Pause audio",this.handler.onPlay();break;case 0:this.pause();break}}pause(){this.state!==1&&(this.state=1,this.el.textContent="Play audio",this.handler.onPause())}};var U=class extends b{constructor(e,s){super("Speed",e);this.node=s,this.setInput(this.node),this.setOutput(this.node),this.el.value=`${this.logRange(1,.1,3,!0)}`}onChange(e){this.ramp(this.node.playbackRate,this.logRange(e,.1,3))}};var P=class extends b{constructor(e){super("Volume",e,"mid");this.node=this.core.context.createGain(),this.setInput(this.node),this.setOutput(this.node),this.node.gain.setValueAtTime(this.logRange(51,0,3),this.core.context.currentTime)}onChange(e){this.ramp(this.node.gain,this.logRange(e,0,3))}};var oe;(function(t){t[t.visible=0]="visible",t[t.hidden=1]="hidden"})(oe||(oe={}));var V=class{constructor(e,s,i){this.core=e,this.bufferNode=s,this.nodeIndex=i,this.el=p("div.hidden"),this.playBtn=new M(this),this.volumeCtrl=new P(this.core),this.volumeCtrl.connectOutput(this.core.context.destination),this.lowpassCtrl=new B(this.core),this.lowpassCtrl.connectOutput(this.volumeCtrl),this.distortionCtrl=new A(this.core),this.distortionCtrl.connectOutput(this.lowpassCtrl),this.compressorCtrl=new O(this.core),this.compressorCtrl.connectOutput(this.distortionCtrl),this.speedCtrl=new U(this.core,this.bufferNode),u(this.el,this.wrap(this.playBtn)),u(this.el,this.wrap(this.compressorCtrl,"Slide to control compressor")),u(this.el,this.wrap(this.distortionCtrl,"Slide to control distortion")),u(this.el,this.wrap(this.lowpassCtrl,"Slide to control filter")),u(this.el,this.wrap(this.volumeCtrl,"Slide to control volume")),u(this.el,this.wrap(this.speedCtrl,"Slide to control speed")),this.state=1}wrap(e,s){let i=p("div");if(s){let o=p("p",s);u(i,o)}return u(i,e),i}show(){this.state!==0&&(this.state=0,this.el.classList.remove("hidden"))}hide(){this.state!==1&&(this.state=1,this.el.classList.add("hidden"))}async onPlay(){this.compressorCtrl.connectInput(this.bufferNode),this.core.onPlaySample(this.nodeIndex)}async onPause(){this.compressorCtrl.disconnectInput(this.bufferNode),this.core.onPauseSample(this.nodeIndex)}};var y=class{static init(){new y}constructor(){this.baseEl=this.getElOrThrow("#root");let e=window.AudioContext||window.webkitAudioContext;this.context=new e,this.context.suspend();let s=10,i=4096;this.entities=[],this.recordingHandler=new L(this,"/_dist_/recordWorker.js",i,s),this.recordBtn=new D(`${this.entities.length}`,this.recordingHandler,s),this.entities.push(this.recordBtn),this.sampleBank=new T(this,1),this.sampleBlocks=[],this.samplesMount=p("div.samplesMount"),this.sampleList=new I(this),this.setUI()}getElOrThrow(e){let s=document.querySelector(e);if(!s)throw Error(`Couldn't find element ${e}`);return s}wrap(e,s,i){let o=p(`div${i?`.${i}`:""}`);if(s){let r=p("p",s);u(o,r)}return Array.isArray(e)?N(o,e):u(o,e),o}setUI(){u(this.baseEl,this.wrap([this.wrap(this.recordBtn),this.samplesMount],void 0,"controls")),u(this.baseEl,this.sampleList)}onRecorded(e){this.sampleBank.create(e)}async handleStream(e){this.context.resume(),this.sourceNode=this.context.createMediaStreamSource(e)}onError(){this.context.suspend()}async startRecording(){}async stopRecording(){}async reloadContext(){this.context.resume()}async onPlaySample(e){this.sampleBank.play(e)}async onPauseSample(e){this.sampleBank.pause(e)}onSampleAdd(e){let s=new V(this,this.sampleBank.node(e),e);this.sampleBlocks.push(s),u(this.samplesMount,s),this.sampleList.add(e,this.sampleBank.label(e))}onLabelChange(){}onSampleSelected(e,s){s!==void 0&&this.sampleBlocks[s].hide(),this.sampleBlocks[e].show()}getRecorderInputNode(){if(!this.sourceNode)throw Error("No source node available for recording");return this.sourceNode}};export{y as Schallvernichtung};
